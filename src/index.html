<!doctype html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">

    <meta name="theme-color" media="(prefers-color-scheme: light)" content="#111827">
    <meta name="theme-color" media="(prefers-color-scheme: dark)" content="#111827">

    <link rel="shortcut icon" href="assets/img/favicon.ico" type="image/x-icon">
    <title>Share - System to share images using Web Share API</title>

    <link rel="stylesheet" href="assets/style.css">
</head>
<body class="bg-gray-100 flex flex-col min-h-screen gap-y-10">

    <header class="px-5 pt-10">
        <h1 class="font-bold text-center tracking-wider text-2xl">Sistema de Compartilhamento</h1>
    </header>

    <main class="flex-1 flex flex-col h-full px-5">

        <div class="flex-1 flex flex-col h-full" id="banner">

            <div class="z-20 bg-gray-400 shadow-inner overflow-hidden rounded-t-3xl rounded-br-3xl w-full h-[600px] shadow-md">
                <img src="https://picsum.photos/1080/1920?2" class="object-cover object-center w-full h-full" alt="">
            </div>

            <div class="z-0 flex-1 flex flex-col justify-center gap-3 px-5 bg-white mr-5 rounded-br-3xl shadow-md">

                <div class="text-2xl text-gray-700">
                    <label for="name" class="sr-only"></label>
                    <input id="name" type="text" class="font-bold text-center w-full p-1 underline bg-transparent" value="Eduardo JosÃ©" placeholder="Seu nome">
                </div>

                <div class="flex gap-3 text-sm w-full">
                    <div class="w-full">
                        <label for="tel" class="sr-only"></label>
                        <input id="tel" type="tel" class="w-full p-1 text-center bg-transparent" value="(11) 95472-3067" placeholder="Seu telefone">
                    </div>

                    <div class="w-full">
                        <label for="email" class="sr-only"></label>
                        <input id="email" type="email" class="w-full p-1 text-center bg-transparent" value="eduardojsc18@outlook.com" placeholder="Seu email">
                    </div>
                </div>


            </div>

        </div>

    </main>

    <nav class="p-5 bg-white rounded-t-[2.5rem] grid grid-cols-2 gap-5 shadow-[0_20px_25px_5px_rgb(0_0_0_/_0.1),0_8px_10px_6px_rgb(0_0_0_/_0.1)] font-bold text-gray-600">

        <div class="cursor-pointer flex items-center justify-center gap-3 bg-green-50 hover:bg-green-100 rounded-3xl py-5 text-green-500 active:bg-green-900 active:text-green-50 transition-all">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-7 w-7" viewBox="0 0 20 20" fill="currentColor">
                <path fill-rule="evenodd" d="M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z" clip-rule="evenodd" />
            </svg>
            Baixar
        </div>

        <div class="cursor-pointer flex items-center justify-center gap-3 bg-blue-50 hover:bg-blue-100 rounded-3xl py-5 text-blue-500 active:bg-blue-900 active:text-blue-50 transition-all"
             onclick="shareImage()"
            >
            <svg xmlns="http://www.w3.org/2000/svg" class="h-7 w-7" viewBox="0 0 20 20" fill="currentColor">
                <path d="M15 8a3 3 0 10-2.977-2.63l-4.94 2.47a3 3 0 100 4.319l4.94 2.47a3 3 0 10.895-1.789l-4.94-2.47a3.027 3.027 0 000-.74l4.94-2.47C13.456 7.68 14.19 8 15 8z" />
            </svg>
            Compartilhar
        </div>

    </nav>

    <script src="assets/js/dom-to-image-more/src/dom-to-image-more.js" ></script>

    <script>

        async function shareImage() {

            await domtoimage
                .toJpeg(document.getElementById('banner'))
                .then(function (dataUrl) {
                    share(dataUrl)
                })

            async function share(image) {

                const blob = await (await fetch(image)).blob();
                const file = new File([blob], 'NomeDoArquivo.jpeg', {type: blob.type});

                await navigator.share({
                    title: 'Hello',
                    text: 'Check out this image!',
                    files: [file],
                })

            }

        }

    </script>

</body>
</html>